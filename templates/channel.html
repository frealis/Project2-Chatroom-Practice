<!DOCTYPE html>
<html>
<head>
  <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/socket.io/1.3.6/socket.io.min.js"></script>
  <script src="{{ url_for('static', filename='channel.js') }}"></script>
  <script src="https://unpkg.com/moment"></script>
  <title>Channel</title>
</head>
<body>
  <p>
      Welcome <span id="username">{{ g.username }}</span>, you are in channel "<span id="channel_name" name="channel_name">{{ channel_name }}</span>".
  </p>

  <!-- Chat History -->
  <div>
      {% for key in chat_history %}
        [{{ chat_history[key]['date'] }}] {{ chat_history[key]['username'] }}: {{ chat_history[key]['message'] }}<br>
      {% endfor %}
  </div>

  <!-- Chatroom -->
  <div id="chatroom"></div>

  <br>

  <!-- Message input field -->
  <div>
    <form id="form_input">
      <input id="input" type="text" autofocus placeholder="Enter a message">
      <input id="submit_input" type="submit" value="Submit">
    </form>
  </div>

  <br>

  <div>
    <a href="{{ url_for('logout_channel') }}">Change channel</a><br><br>
    <a href="{{ url_for('logout') }}">Logout</a>
  </div>
</body>
</html>
